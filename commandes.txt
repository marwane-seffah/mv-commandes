\\\
sudo apt install -y apache2 libapache2-mpm-itk
sudo apt install -y mariadb-server mariadb-client
sudo apt install -y libapache2-mod-php php-mysql
sudo apt install -y phpmyadmin
sudo apt install -y flatpak gnome-software-plugin-flatpak
flatpak remote-add --if-not-exists flathub https://dl.flathub.org/repo/flathub.flatpakrepo --system
exit
flatpak install -y flathub com.vscodium.codium

///
[Unit]
Description=Run first boot setup script
After=network.target

[Service]
Type=oneshot
ExecStart=/usr/local/bin/firstboot.sh
RemainAfterExit=true

[Install]
WantedBy=multi-user.target
\\\

// sûr que ça marche !
apt install ncdu (voit stockage et memoire)
// fond écran
crée fichier .desktop dans /etc/xdg/autostart
nano (fichier)

dans fichier mettre : 

[Desktop Entry]
Type=Application
Name=Set Custom Wallpaper
Exec=pcmanfm --set-wallpaper /usr/share/backgrounds/custom_wallpaper.jpg --wallpaper-mode=fit
OnlyShowIn=LXDE;
X-GNOME-Autostart-enabled=true

chmod 644 /etc/xdg/autostart/(fichier).desktop

https://flathub.org/fr/setup/Ubuntu
https://doc.ubuntu-fr.org/visual_studio_code
https://forums.whonix.org/t/flatpak-install-user-error-no-remote-refs-found/20392/5


server web :
sudo mkdir -p /etc/skel/www
sudo chmod 755 /etc/skel/www
sudo cp -a /etc/apache2/sites-available/default-ssl.conf \
           /etc/apache2/sites-available/pa-ubuntu-vm.conf


------------------------------------------------
Sauveguarde

```
// chroot

touch /usr/local/bin/system-backup.sh
touch /var/log/backup.log
nano /usr/local/bin/system-backup.sh
// add script
```


```
// add into .bashrc

apt install borgbackup
apt install crontab

borg init --encryption=repokey /backupdrive/borg
    
sudo chmod +x /usr/local/bin/system-backup.sh
sudo crontab -e
0 3 * * * /usr/local/bin/system-backup.sh
```


```
// Script

export BORG_REPO= "/backupdrive/borg"
LOGFILE="/var/log/backup.log"

borg create                         \
    --verbose                       \
    --filter AME                    \
    --list                          \
    --stats                         \
    --show-rc                       \
    --compression lz4               \
    --exclude-caches                \
    --exclude 'home/*/.cache/*'     \
    --exclude 'var/tmp/*'           \
                                    \
    ::'{hostname}-{now}'            \
    /etc                            \
    /home                           \
    /root                           \
    /var

info "Pruning repository"

borg prune                          \
    --list                          \
    --glob-archives '{hostname}-*'  \
    --show-rc                       \
    --keep-daily    7               \
    --keep-weekly   4               \
    --keep-monthly  6
prune_exit=$?

info "Compacting repository"
borg compact

borg check $BORG_REPO >> $LOGFILE 2>&1
